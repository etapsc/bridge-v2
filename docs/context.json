{
  "schema": "context.v1",
  "project": "BRIDGE v2.1 Toolkit",
  "last_updated": "2026-03-01",
  "feature_status": {
    "F01": "done",
    "F02": "done",
    "F03": "done",
    "F04": "done",
    "F05": "done",
    "F06": "done",
    "F07": "done",
    "F08": "done",
    "F09": "done",
    "F10": "done",
    "F11": "done",
    "F12": "done",
    "F13": "done"
  },
  "slice_history": [
    {
      "id": "S00",
      "goal": "Initial build — all 4 packs, setup.sh, README, methodology doc",
      "status": "done",
      "notes": "Built across multiple claude.ai sessions. Full pack first, then standalone, claude-code, codex."
    },
    {
      "id": "S01",
      "goal": "Apply Post-Delivery Feedback Loop edits to all packs",
      "status": "done",
      "notes": "Feedback loop (ISSUES REPORTED / APPROVED / STOP) applied to all orchestrator files, slice-plan skills, and standalone commands across all 5 packs."
    },
    {
      "id": "S02",
      "goal": "Verify all packs are consistent and commands match across packs",
      "status": "done",
      "notes": "Audit confirmed all 5 packs have identical 17 commands and 8 procedure skills. Added F11 (OpenCode), F12 (Design Command) to requirements.json. Updated all counts from 4→5 packs, 16→17 commands."
    },
    {
      "id": "S03",
      "goal": "Add bridge-advisor strategic advisor command to all packs",
      "status": "done",
      "notes": "Created bridge-advisor in all 5 packs (F13). 3 advisor roles: Product Strategist, Developer Advocate, Critical Friend. Updated command listings in AGENTS.md (codex, opencode) and setup.sh. All counts updated 17→18 commands."
    },
    {
      "id": "S04",
      "goal": "Rebuild all 5 tar.gz files using package.sh",
      "status": "done",
      "notes": "Rebuilt all tar.gz files: bridge-full (22K), bridge-standalone (22K), bridge-claude-code (23K), bridge-codex (23K), bridge-opencode (23K). All archives validated."
    },
    {
      "id": "S05",
      "goal": "Fix RooCode Ask-mode return path so orchestrator resumes active slice automatically",
      "status": "done",
      "notes": "Initial attempt added CLARIFICATIONS HANDLED VIA ASK rules (post-hoc). Replaced in S06 with preventive approach: ban Ask mode switching entirely, use HUMAN: blocks for clarifications instead."
    },
    {
      "id": "S06",
      "goal": "Replace ineffective Ask-mode return rules with preventive no-Ask-mode constraint",
      "status": "done",
      "notes": "Removed CLARIFICATIONS HANDLED VIA ASK sections from bridge-full orchestrator policy and standalone bridge-start/bridge-resume commands. Added hard constraint: NEVER switch to Ask mode — use HUMAN: blocks for user input, delegate to sub-tasks for code investigation. Root cause: S05 fix was post-hoc (told AI to recover after switching) instead of preventive (tell AI not to switch). Tar.gz rebuild needed."
    },
    {
      "id": "S07",
      "goal": "Align bridge-codex with latest Codex conventions and fix Codex-pack inconsistencies",
      "status": "done",
      "notes": "Researched latest Codex docs/changelog. Added native `.codex/skills/` tree (26 skills) as compatibility target, kept `.agents/skills/` as authoring mirror, standardized command references to `$bridge-*`, aligned status vocabulary to planned/in-progress/review/done/blocked, fixed eval filename expectation and context path typo, and added `quality_gates.e2e_critical_paths` to codex requirements template. Updated codex config with optional `profiles.bridge` (gpt-5-codex + reasoning summary auto); omitted `web_search` from profile defaults for cross-version compatibility (use `--search` at runtime)."
    },
    {
      "id": "S08",
      "goal": "Fix Codex profile parse incompatibility for web_search in bridge-codex",
      "status": "done",
      "notes": "Removed `web_search` from `bridge-codex/.codex/config.toml` profile defaults to avoid version-specific parsing errors. Added guidance to use `codex --profile bridge --search` when needed. Rebuilt distributable archives with `./package.sh` and sanity-checked `codex --profile bridge --help` in `bridge-codex/`."
    },
    {
      "id": "S09",
      "goal": "Remove redundant .codex/skills/ from bridge-codex — single skills directory",
      "status": "done",
      "notes": "Removed duplicate `.codex/skills/` directory (byte-for-byte copy of `.agents/skills/`). Skills now live only in `.agents/skills/` per standard Codex convention. `.codex/` retains only `config.toml`. Updated AGENTS.md to remove dual-directory reference. Rebuilt all archives."
    },
    {
      "id": "S10",
      "goal": "Separate Codex workflow skills from internal procedures to avoid confusing `$` skill suggestions",
      "status": "done",
      "notes": "Moved 8 internal procedure docs from `.agents/skills/*/SKILL.md` to `.agents/procedures/*.md` in `bridge-codex`, updated workflow skills to reference procedure file paths directly, and updated `bridge-codex/AGENTS.md` plus requirements F04 to document the new split. Result: only 18 workflow commands remain in Codex skill discovery."
    }
  ],
  "current_slice": null,
  "handoff": {
    "stopped_at": "S10 complete — bridge-codex now exposes only workflow commands as `$` skills; procedures moved to `.agents/procedures/`",
    "next_immediate": "Validate in a real Codex session that `$` suggestions no longer include internal procedure names and core commands still execute correctly",
    "watch_out": [
      "Do not reintroduce `SKILL.md` files under `.agents/skills/` for internal procedures, or they will appear in Codex `$` discovery",
      "Do not add `profiles.bridge.web_search` back to config defaults unless verified against the current Codex config schema"
    ]
  },
  "next_slice": null,
  "quality_gates": {
    "last_run": null,
    "status": null
  },
  "commands_to_run": {
    "package": "./package.sh",
    "verify_commands": "for pack in bridge-full bridge-standalone bridge-claude-code bridge-codex bridge-opencode; do echo \"=== $pack ===\"; find $pack -name '*.md' | grep -c command; done",
    "verify_feedback_loop": "grep -rl 'ISSUES REPORTED' bridge-full/ bridge-standalone/ bridge-claude-code/ bridge-codex/ bridge-opencode/ | sort"
  },
  "discrepancies": []
}
